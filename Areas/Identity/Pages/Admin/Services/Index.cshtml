@page
@using FreelancePlatform.Models
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model FreelancePlatform.Areas.Identity.Pages.Admin.Services.IndexModel
@{
ViewData["Title"] = "Услуги";
}
<h2>Услуги</h2>
<table class="custom-table table-bordered table-striped">
    <thead>
    <tr>
        <th>Название</th>
        <th>Фрилансер</th>
        <th>Статус</th>
        <th>Действия</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var service in Model.Services)
    {
    <tr>
        <td>@service.Title</td>
        <td>@service.Freelancer?.UserName</td>
        <td>@GetStatusText(service.Status.ToString())</td>
        <td>
            @if (service.Status == ServiceStatus.Available)
            {
                <form method="post" asp-page-handler="Close" asp-route-id="@service.Id" class="d-inline">
                    <button class="btn btn-sm btn-warning">Закрыть</button>
                </form>
            }
            else
            {
                <form method="post" asp-page-handler="Open" asp-route-id="@service.Id" class="d-inline">
                    <button class="btn btn-sm btn-success">Открыть</button>
                </form>
            }
            <form method="post" asp-page-handler="Delete" asp-route-id="@service.Id" class="d-inline">
                <button class="btn btn-sm btn-danger">Удалить</button>
            </form>
            <form method="get" asp-page="Details" asp-route-id="@service.Id" class="d-inline">
                <button type="submit" class="btn btn-sm btn-primary">Подробнее</button>
            </form>
        </td>
    </tr>
    }
    </tbody>
</table>

@functions
{
    private string GetStatusText(string status)
    {
        return status switch
        {
            "Available" => "Размещена",
            "Unavailable" => "Закрыта",
            _ => "Неизвестно"
        };
    }
}
