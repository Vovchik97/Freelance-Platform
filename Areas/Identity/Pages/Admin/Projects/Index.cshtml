@page
@model FreelancePlatform.Areas.Identity.Pages.Admin.Projects.IndexModel
@{
ViewData["Title"] = "Проекты";
}
<h2>Проекты</h2>
<table class="custom-table table-bordered table-striped">
    <thead>
    <tr>
        <th>Название</th>
        <th>Клиент</th>
        <th>Статус</th>
        <th>Действия</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var project in Model.Projects)
    {
    <tr>
        <td>@project.Title</td>
        <td>@project.Client?.UserName</td>
        <td>@GetStatusText(project.Status.ToString())</td>
        <td>
            <form method="post" asp-page-handler="Close" asp-route-id="@project.Id" class="d-inline">
                <button class="btn btn-sm btn-warning">Закрыть</button>
            </form>
            <form method="post" asp-page-handler="Delete" asp-route-id="@project.Id" class="d-inline">
                <button class="btn btn-sm btn-danger">Удалить</button>
            </form>
            <form method="get" asp-page="Details" asp-route-id="@project.Id" class="d-inline">
                <button type="submit" class="btn btn-sm btn-primary">Подробнее</button>
            </form>
        </td>
    </tr>
    }
    </tbody>
</table>

@functions
{
    private string GetStatusText(string status)
    {
        return status switch
        {
            "Open" => "Открыт",
            "InProgress" => "В работе",
            "Cancelled" => "Закрыт",
            "Completed" => "Выполнен",
            _ => "Неизвестно"
        };
    }
}